{"ast":null,"code":"import _slicedToArray from\"E:\\\\project\\\\fullstack\\\\part3\\\\phonebook\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import phoneService from'./services/phones';import Form from'./Form';var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),persons=_useState2[0],setPersons=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newName=_useState4[0],setNewName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),newNumber=_useState6[0],setNewNumber=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var Notification=function Notification(_ref){var message=_ref.message;if(message===null){return null;}return/*#__PURE__*/React.createElement(\"div\",{className:\"error\"},message);};useEffect(function(){phoneService.getAll().then(function(response){setPersons(response.data);});},[]);var addNumber=function addNumber(event){event.preventDefault();//console.log(persons)\nvar phoneObject={name:newName,number:newNumber,id:persons.length+1};//console.log(persons.map(person=>person.name))\nif(persons.some(function(person){return person.name===newName;})){setErrorMessage(\"\".concat(newName,\" already exists\"));setTimeout(function(){setErrorMessage(null);},2000);}else{setPersons(persons.concat(phoneObject));phoneService.create(phoneObject).then(function(response){setErrorMessage(\"\".concat(newName,\" added to db\"));setTimeout(function(){setErrorMessage(null);},2000);});setNewName('');setNewNumber('');}};var handleName=function handleName(event){setNewName(event.target.value);};var handleNumber=function handleNumber(event){setNewNumber(event.target.value);};var Phonebook=function Phonebook(_ref2){var name=_ref2.name,number=_ref2.number,did=_ref2.did;return/*#__PURE__*/React.createElement(\"p\",null,name,\" \",number,/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return ohrio(did);}},\"delete\"));};var ohrio=function ohrio(delid){phoneService.delrio(delid).then(setErrorMessage('Deleted'),setTimeout(function(){setErrorMessage(null);},2000));setPersons(persons.filter(function(person){return person.id!==delid;}));};return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Notification,{message:errorMessage}),/*#__PURE__*/React.createElement(\"h2\",null,\"Phonebook\"),/*#__PURE__*/React.createElement(Form,{addNumber:addNumber,newName:newName,handleName:handleName,newNumber:newNumber,handleNumber:handleNumber}),/*#__PURE__*/React.createElement(\"h2\",null,\"Numbers\"),persons.map(function(persons){return/*#__PURE__*/React.createElement(Phonebook,{name:persons.name,number:persons.number,key:persons.id,did:persons.id});}));};export default App;","map":{"version":3,"sources":["E:/project/fullstack/part3/phonebook/src/components/App.js"],"names":["React","useState","useEffect","phoneService","Form","App","persons","setPersons","newName","setNewName","newNumber","setNewNumber","errorMessage","setErrorMessage","Notification","message","getAll","then","response","data","addNumber","event","preventDefault","phoneObject","name","number","id","length","some","person","setTimeout","concat","create","handleName","target","value","handleNumber","Phonebook","did","ohrio","delid","delrio","filter","map"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport phoneService from './services/phones'\r\nimport Form from './Form'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]) \r\n  const [ newName, setNewName ] = useState('')\r\n  const [ newNumber, setNewNumber ] = useState('')\r\n  const [ errorMessage, setErrorMessage ] = useState(null)\r\n\r\n  const Notification = ({ message }) => {\r\n    if (message === null) {\r\n      return null\r\n    }\r\n  \r\n    return (\r\n      <div className=\"error\">\r\n        {message}\r\n      </div>\r\n    )\r\n  }\r\n  \r\n  useEffect(()=>{\r\n    phoneService\r\n    .getAll()\r\n    .then(response=>{\r\n      setPersons(response.data)\r\n      })\r\n  },[])\r\n\r\n  const addNumber=(event)=>{\r\n    event.preventDefault()\r\n    //console.log(persons)\r\n    const phoneObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n      id: persons.length + 1\r\n    }\r\n    //console.log(persons.map(person=>person.name))\r\n    if(persons.some(person=>person.name===newName)){\r\n      setErrorMessage(`${newName} already exists`)\r\n      setTimeout(()=>{setErrorMessage(null)},2000)\r\n    }\r\n    else{\r\n      setPersons(persons.concat(phoneObject))\r\n      phoneService\r\n      .create(phoneObject)\r\n      .then(response=>{\r\n        setErrorMessage(`${newName} added to db`)\r\n        setTimeout(()=>{setErrorMessage(null)},2000)\r\n      })\r\n      setNewName('')\r\n      setNewNumber('')\r\n    }\r\n   \r\n  \r\n  }\r\n\r\n  const handleName=(event)=>{\r\n    setNewName(event.target.value)\r\n  }\r\n  const handleNumber=(event)=>{\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n\r\n  const Phonebook=({name,number,did})=>{\r\n    return(\r\n        <p>{name} {number} \r\n        <button onClick={()=>ohrio(did)}>delete</button></p>\r\n    )\r\n}\r\n\r\nconst ohrio = delid =>{\r\n    phoneService\r\n    .delrio(delid)\r\n    .then(\r\n      setErrorMessage('Deleted'),\r\n      setTimeout(()=>{setErrorMessage(null)},2000)\r\n    )\r\n    setPersons(persons.filter(person=>person.id!==delid))\r\n}\r\n\r\n  return (\r\n    <div>\r\n      <Notification message={errorMessage} />\r\n      <h2>Phonebook</h2>\r\n      <Form addNumber={addNumber} newName={newName} handleName={handleName} newNumber={newNumber} handleNumber={handleNumber} />\r\n      <h2>Numbers</h2>\r\n      {persons.map(persons=>\r\n        <Phonebook name={persons.name} number={persons.number} key={persons.id} did={persons.id}/>)}\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App"]},"metadata":{},"sourceType":"module"}